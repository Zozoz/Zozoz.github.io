<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Newbie</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="Newbie">
<meta property="og:url" content="http://zozoz.github.io/index.html">
<meta property="og:site_name" content="Newbie">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Newbie">
<meta name="twitter:description">
  
    <link rel="alternate" href="/atom.xml" title="Newbie" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Newbie</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Søk"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://zozoz.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-test" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/25/test/" class="article-date">
  <time datetime="2016-02-25T08:08:18.000Z" itemprop="datePublished">2016-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/25/test/">test</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Simple inline $a = b + c$.</p>
<p>$$\frac{\partial u}{\partial t}<br>= h^2 \left( \frac{\partial^2 u}{\partial x^2} +<br>\frac{\partial^2 u}{\partial y^2} +<br>\frac{\partial^2 u}{\partial z^2}\right)$$</p>
<p>$$\Delta W_{kj}^l = \frac{\partial C}{\partial w_{kj}^l} * \delta^l_k$$</p>
<p>$$\Delta W_{kj}^l = \frac{\partial C}{\partial w_{kj}^l} = \frac{\partial C}{\partial z^l_k} * \frac{\partial z^l_k}{\partial w^l_{kj}} =<br>\delta^l_k \frac{\partial z^l_k}{\partial w^l_{kj}}$$</p>


## raw

$$\Delta W\_{kj}^l = \frac{\partial C}{\partial w_{kj}^l} * \delta^l_k$$





      
    </div>
    <footer class="article-footer">
      <a data-url="http://zozoz.github.io/2016/02/25/test/" data-id="cil29t10a0006vtjg7dtezlcq" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/25/hello-world/" class="article-date">
  <time datetime="2016-02-25T07:02:00.000Z" itemprop="datePublished">2016-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/25/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="external">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zozoz.github.io/2016/02/25/hello-world/" data-id="cil29t10f0007vtjg71cis6c2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Kleinberg" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/16/Kleinberg/" class="article-date">
  <time datetime="2015-12-16T13:55:14.000Z" itemprop="datePublished">2015-12-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/16/Kleinberg/">Kleinberg</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h2><h3 id="马尔科夫性质"><a href="#马尔科夫性质" class="headerlink" title="马尔科夫性质"></a><a href="https://zh.wikipedia.org/wiki/%E9%A9%AC%E5%B0%94%E5%8F%AF%E5%A4%AB%E6%80%A7%E8%B4%A8" target="_blank" rel="external">马尔科夫性质</a></h3><p>马尔可夫性质(Markov property)是概率论中的一个概念, 因为俄国数学家安德雷·马尔可夫得名。<br>当一个随机过程在给定现在状态及所有过去状态情况下, 其未来状态的条件概率分布仅依赖于当前状态；<br>换句话说, 在给定现在状态时, 它与过去状态(即该过程的历史路径)是条件独立的, 那么此随机过程即具有马尔可夫性质。<br>具有马尔可夫性质的过程通常称之为马尔可夫过程。<br>数学上, 如果X(t), t &gt; 0为一个随机过程, 则马尔科夫性质就是指</p>
<p>P(X(t+h) = y | X(s) = x(s), s &lt;= t) = P(X(t+h) = y | X(t) = x(t)),   h &gt; 0</p>
<h3 id="马尔科夫链"><a href="#马尔科夫链" class="headerlink" title="马尔科夫链"></a><a href="https://zh.wikipedia.org/wiki/%E9%A9%AC%E5%B0%94%E5%8F%AF%E5%A4%AB%E9%93%BE" target="_blank" rel="external">马尔科夫链</a></h3><p>马尔科夫链是满足马尔科夫性质的随机变量的序列$ X_1 $, $ X_2 $, …, 即给出当前状态，将来状态和过去状态是相互独立的。<br>从形式上看，如果两边的条件分布有定义(即如果$ P(X_1 = x_1, …, X_n = x_n) &gt; 0 $), 则</p>
<p>$ P(X_{n+1} = x | X_1 = x_1, X_2 = x_2, …, X_n = x_n) = P(X_{n+1} = x | X_n = x_n) $ <br></p>
<p>$ X_i $的可能值构成的可数集S叫做该链的”状态空间”。</p>
<p>m-阶马尔科夫链(记忆为m的马尔科夫链), 其中m有限, 满足</p>
<p>$ P(X_n = x_n | X_{n-1} = x_{n-1}, X_{n-2} = x_{n-2}, …, X_1 = x_1)<br>= P(X_n = x_n | X_{n-1} = x_{n-1}, X_{n-2} = x_{n-2}, …, X_{n-m} = x_{n-m}), n &gt; m<br>$<br></p>
<p>的过程。换句话说, 未来状态取决于其前m个状态。</p>
<h3 id="隐马尔科夫模型"><a href="#隐马尔科夫模型" class="headerlink" title="隐马尔科夫模型"></a><a href="https://zh.wikipedia.org/wiki/%E9%9A%90%E9%A9%AC%E5%B0%94%E5%8F%AF%E5%A4%AB%E6%A8%A1%E5%9E%8B" target="_blank" rel="external">隐马尔科夫模型</a></h3><p>隐马尔可夫模型(Hidden Markov Model, HMM)是统计模型，它用来描述一个含有隐含未知参数的马尔可夫过程。<br>其难点是从可观察的参数中确定该过程的隐含参数。</p>
<p><img src="http://7xnepc.com1.z0.glb.clouddn.com/HMM.png" alt="隐马尔可夫模型状态变迁图"><br>x — 隐含状态<br>y — 可观察的输出<br>a — 转换概率(transition probabilities)<br>b — 输出概率(output probabilities)</p>
<p>上图展示了HMM的演化过程，图中箭头方向表示不同状态的关联性，x(t)只由x(t-1)决定，y(t)只由x(t)决定。</p>
<h4 id="HMM有三个典型的问题"><a href="#HMM有三个典型的问题" class="headerlink" title="HMM有三个典型的问题"></a>HMM有三个典型的问题</h4><ol>
<li>已知模型参数，计算某一特定输出序列的概率.通常使用forward算法解决.</li>
<li>已知模型参数，寻找最可能的能产生某一特定输出序列的隐含状态的序列.通常使用Viterbi算法解决.</li>
<li>已知输出序列，寻找最可能的状态转移以及输出概率.通常使用Baum-Welch算法以及Reversed Viterbi算法解决.</li>
</ol>
<h3 id="维特比算法"><a href="#维特比算法" class="headerlink" title="维特比算法"></a><a href="https://zh.wikipedia.org/wiki/%E7%BB%B4%E7%89%B9%E6%AF%94%E7%AE%97%E6%B3%95" target="_blank" rel="external">维特比算法</a></h3><p>维特比算法(Viterbi algorithm)是一种动态规划算法。它用于寻找最有可能产生观测事件序列的-维特比路径-隐含状态序列。</p>
<p>假设给定隐式马尔可夫模型状态空间 S，初始状态 i 的概率为 $ \pi_{i} $, 从状态 i 到状态 j 的转移概率为 $ a_{i,j} $.<br>令观察到的输出为 $ y_{1}, \dots, y_{T}$。 产生观察结果的最有可能的状态序列 $ x_{1}, \dots, x_{T} $ 由递推关系给出：<br></p>
<p>$ V_{1,k} = P{\big (}y_{1}\ |\ k{\big )} \cdot \pi_{k} $ <br><br>$ V_{t,k} = P{\big (}y_{t}\ |\ k{\big )} \cdot \max_{x\in S}\left(a_{x,k} \cdot V_{t-1,x}\right) $ <br></p>
<p>此处 $V_{t,k}$ 是前 t 个最终状态为 k 的观测结果最有可能对应的状态序列的概率。<br>通过保存向后指针记住在第二个等式中用到的状态 x 可以获得维特比路径。<br>声明一个函数 Ptr(k,t), 当t = 1时返回k, 当t &gt; 1, 返回$V_{t,k}$. 这样: <br></p>
<p>$ x_{T} = \arg \max_{x\in S}(V_{T,x}) $ <br><br>$ x_{t} = Ptr(x_{t},t) $ <br></p>
<p>这里我们使用了arg max的标准定义。<br>算法复杂度为 <br></p>
<p>$ O(T\times \left|{S}\right|^{2}) $ <br></p>
<h4 id="一个例子"><a href="#一个例子" class="headerlink" title="一个例子"></a>一个例子</h4><p>想象一个乡村诊所。村民有着非常理想化的特性，要么健康要么发烧。他们只有问诊所的医生的才能知道是否发烧。 聪明的医生通过询问病人的感觉诊断他们是否发烧。村民只回答他们感觉正常、头晕或冷。</p>
<p>假设一个病人每天来到诊所并告诉医生他的感觉。医生相信病人的健康状况如同一个离散马尔可夫链。病人的状态有两种“健康”和“发烧”，但医生不能直接观察到，这意味着状态对他是“隐含”的。每天病人会告诉医生自己有以下几种由他的健康状态决定的感觉的一种：正常、冷或头晕。这些是观察结果。 整个系统为一个隐马尔可夫模型(HMM)。</p>
<p><img src="http://7xnepc.com1.z0.glb.clouddn.com/An_example_of_HMM.png" alt="一个例子"></p>
<p>我们假设观察结果序列为{“Normal”, “Cold”, “Dizzy”}, 那么计算过程如下：</p>
<p><img src="http://7xnepc.com1.z0.glb.clouddn.com/Viterbi_animated_demo.gif" alt="计算过程"></p>
<p>由图可见，最有可能由状态序列{“Healthy”, “Healthy”, “Fever”}产生。</p>
<h1 id="突发事件检测"><a href="#突发事件检测" class="headerlink" title="突发事件检测"></a>突发事件检测</h1><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>微博空间充斥着海量的短信息,用户无法通过阅读大量微博来获取实时的突发话题,对微博中的海量信息进行挖掘,发现实时发生的突发事件可以有效地帮助用户找到自己感兴趣的话题,改善用户体验; 另一方面,随着近年来的迅猛发展,微博在舆情分析、观点挖掘等领域起到了重要作用,而突发事件检测作为网络舆情分析的重要分支,也逐步受到了国内外学者的关注。因此,研 究在微博空间中的海量信息中挖掘突发事件,具有重要意义。</p>
<p>按照突发特征识别的顺序,突发事件识别可以分为以文本为中心的方法和以突发特征为中心的方法。前者是先进行文本聚类,再在类中抽取出突发特征,进行突发事件的识别; 后者是先抽取出突发特征,再对突发特征进行分组,使用突发特征组进行突发事件的识别。</p>
<h2 id="相关论文研究"><a href="#相关论文研究" class="headerlink" title="相关论文研究"></a>相关论文研究</h2><h3 id="Bursty-and-Hierarchical-Structure-in-Streams-Jon-Kleinburg"><a href="#Bursty-and-Hierarchical-Structure-in-Streams-Jon-Kleinburg" class="headerlink" title="Bursty and Hierarchical Structure in Streams, Jon Kleinburg"></a><a href="https://www.cs.cornell.edu/home/kleinber/bhs.pdf" target="_blank" rel="external">Bursty and Hierarchical Structure in Streams, Jon Kleinburg</a></h3><p>This work appears in the Proceedings of the 8th ACM SIGKDD International Conference on Knowledge Discovery and Data Mining, 2002.</p>
<p>虽然作者提出的方法当时主要是为了发现长文本中的突发事件，但是对我们处理微博这样的短文本有重要的借鉴意义。</p>
<p>或许生成一个消息到达时间序列的最简单随机模型是基于指数分布的：消息以一定的概率模式发出，所以两个相邻消息i和i+1的间隔x有指数分布密度函数</p>
<p>$ f(x) = \alpha e^{-\alpha x}, \alpha &gt; 0 $</p>
<p>所以，</p>
<p>$ F(x) = \int_0^x f(x) = 1 - e^{-\alpha x} $<br>$ E(x) = \alpha^{-1} $</p>
<h4 id="A-two-state-model"><a href="#A-two-state-model" class="headerlink" title="A two-state model"></a>A two-state model</h4><p>假设对于事件模型有正常状态q0和突发状态q1，可以看做“低态”和“高态”。当A处在状态q0时，消息以低频率发出，连续消息的<br>间隔x有密度函数$ f_0(x) = \alpha_0 e^{-\alpha_0 x} $; 当A处在状态q1时，消息以高频发出，连续消息间隔x符合密度函数<br>$ f_1(x) = \alpha_1 e^{-\alpha_1 x}$, 显然 $\alpha_1 &gt; \alpha_0$。并且，A从q0转换到q1（从q1转换到q0）的概率$p\in(0,1)$.</p>
<p>当给出一个消息集合的时候，我们可以用这个生成模型去寻找一个可能的状态序列。<br>假设我们知道了n+1个消息，那么可以计算出n个时间间隔$ X = (x_1, x_2, \cdots, x_n)$.<br>令X对应的状态序列$ q = (q_{i_1}, q_{i_2}, \cdots, q_{i_n}) $, 所以, <br></p>
<p>$ f_q(x_1, x_2, \cdots, x_n) = \prod_{t=1}^n f_{i_t}(x_t) $ <br></p>
<p>令b为状态序列q中状态的转换次数，所以q的先验概率为，<br></p>
<p>$ P(q) = (\prod_{i_t \neq i_{t+1}})(\prod_{i_t = i_{t+1}}) = p^b(1-p)^{n-b}  $ <br></p>
<p>所以, <br></p>
<p>$ P(q \mid x) = \frac{P(q)f_q(x)}{\sum_{q^{\prime}}P(q^{\prime})f_{q^{\prime}}(x)} = \frac{1}{Z}(\frac{p}{1-p})^b(1-p)^n \prod_{t=1}^nf_{i_t}(x_t) $  <br></p>
<p>其中，$ Z = \sum_{q^{\prime}}P(q^{\prime})f_{q^{\prime}}(x) $. 对上式中两边同时取对数后取反，得 <br></p>
<p>$ -\ln P(q \mid x) = b\ln \left(\frac{1-p}{p}\right) + \left(\sum_{t=1}^n-\ln f_{i_t}(x_t)\right) - n\ln (1-p) + lnZ $ <br></p>
<p>为求得最可能的状态序列，只需使等式右边最小，而等式右边后两项与状态序列q无关，所以 <br></p>
<p>$ c(q\ \mid\ x) = b\ln \left(\frac{1-p}{p}\right) + \left(\sum_{t=1}^n-\ln f_{i_t}(x_t)\right) $ <br></p>
<p>现在只需使$ c(q \mid x) $最小。从直觉上，使状态变化次数尽量少，同时使状态序列适应时间间隔x的值。具体的解决方法在下面详细介绍。</p>
<h4 id="An-infinite-state-model"><a href="#An-infinite-state-model" class="headerlink" title="An infinite-state model"></a>An infinite-state model</h4><p>已知n+1个消息的时间序列，总时长为T，令时间间隔的估计量$ \hat{g} = \frac{T}{n} $。相比于上面的两状态，我们在这里把状态扩展到多个，<br>即状态序列$ q = (q_{i_1}, q_{i_2}, \cdots, q_{i_n})$中的每一个状态都有可能属于多个状态中的一个。并令$ \alpha_0 = \hat{g}^{-1} = \frac{n}{T} $,<br>对于i &gt; 0, $ \alpha_i = \alpha_0 s^i $.<br>令代价公式为$ \tau(\cdot, \cdot)$, 表示从低密度状态转换到高密度状态的代价。当q从i转换到j时$(f_i(x) &lt; f_j(x))$，</p>
<p>$\tau(i, j) = (j - i)\gamma \ln n, \gamma &gt; 0 $. 特别地，如果$f_j(x) &lt; f_i(x)$, 代价为0。 <br></p>
<p>$ c(q\mid x) = \left(\sum_{t=0}^{n-1}\tau(i_t, i_{t+1}\right) + \left(\sum_{t=1}^n-\ln f_{i_t}(x_t)\right) $ <br></p>
<p>令$i_0 = 0$, 所以无限状态机$ A_{s,\gamma}^*$ 从$q_0$开始. <br></p>
<p><img src="http://7xnepc.com1.z0.glb.clouddn.com/state_tran.png" alt="An infinite-state model for bursty sequences"></p>
<h4 id="Computing-a-minimum-cost-state-sequence"><a href="#Computing-a-minimum-cost-state-sequence" class="headerlink" title="Computing a minimum-cost state sequence"></a>Computing a minimum-cost state sequence</h4><p>已知间隔序列$x = (x_1, x_2, \cdots, x_n)$, 求状态机$ A_{s,\gamma}^* $的状态序列$ q = (q_{i_1}, q_{i_2}, \cdots, q_{i_n}) $，使代价<br>$c(q\ \mid\ x)$最小。并且$A_{s,\gamma}^k$表示状态机只有k个状态选择。<br></p>
<h5 id="Theorem"><a href="#Theorem" class="headerlink" title="Theorem"></a>Theorem</h5><p>$\delta(x) = min_{i=1}^n x_i$ and $k = \lceil 1 + \log_s T + \log_s \delta(x)^{-1} \rceil $.<br></p>
<p>如果$q^{*}$是状态机$A_{s,\gamma}^k$的最优状态序列，那么它也是状态机$A_{s,\gamma}^*$的最优状态序列。<br><br><br><br></p>
<p>证明：<br><br>令$ q^<em> = (q_{l_1}, q_{l_2}, \cdots, q_{l<em>n})$为状态机$A\</em>{s,\gamma}^k$的最优状态序列，$q = (q_{i_1}, q_{i_2}, \cdots, q_{i_n})$<br>为状态机$A_{s,\gamma}^\</em>$的最优状态序列，$l_0 = i_0 = 0, l_{n+1} = i_{n+1} = 0 $.所以，我们只需证明$c(q^*\ \mid\ x) \leq c(q\ \mid\ x)$.<br>令$q^{\prime} = (q_{i^{\prime}_1}, \cdots, q_{i^{\prime}_n}), i^{\prime}_t = min(i_t, k-1)$, 显然 <br></p>
<p>$ \sum_{t=0}^{n-1} \tau(i^{\prime}_t, i^{\prime}_{t+1}) \leq \sum_{t=0}^{n-1} \tau(i_t, i_{t+1})  $ <br></p>
<p>对于代价函数的后一项，$-\ln f_j(x_t) = \alpha_j x_t - \ln \alpha_j, 1 \leq t \leq n$ , 考虑当j为何值时其最小。</p>
<p>而$h(\alpha) = \alpha x_t - \ln\alpha$ 在区间$(0, \infty)$上是凸函数，并且当$\alpha = x_t^{-1}$时取得全局最小值。<br>我们知道$ k = \lceil 1 + \log_s T + \log_s \delta(x)^{-1} \rceil $ , 所以， <br></p>
<p>$<br>\alpha_{k-1} = \hat{g}^{-1}s^{k-1} = \frac{n}{T} \cdot s^{k-1} \geq \frac{1}{T} \cdot s^{\log_s^T + \log_s^{\delta(x)^{-1}}} = \frac{1}{T} \frac{T}{\delta(x)} = \frac{1}{\delta(x)}.<br>$<br><br></p>
<p>因为对于所有的t, 有$\delta(x)^{-1} \geq x_t^{-1}$, 所以当$i_t &gt; k-1$时, 有$\alpha_{i_t} &gt; \alpha_{k-1}$, 所以,<br></p>
<p>$<br>-\ln f_{i_t^{\prime}}(x_t) \leq -\ln f_{i_t}(x_t), i_t &gt; i_t^{\prime} = k-1<br>$<br><br><br>由此，可得，<br></p>
<p>$<br>c(q^{\prime}\ \mid\ x) = \left(\sum_{t=0}^{n-1}\tau(i_t^{\prime}, i_{t+1}^{\prime}) \right) + \left(\sum_{t=1}^n-\ln f_{i_t^{\prime}}(x_t)\right)\<br>\leq \left(\sum_{t=0}^{n-1}\tau(i_t,i_{t+1})\right) + \left(\sum_{t=1}^n-\ln f_{i+t}(x_t)\right) = c(q\ \mid\ x).<br>$<br><br>又因为$q^{\prime}$是自动机$A_{s,\gamma}^k$中的一个状态序列，$q^*$是自动机$A_{s,\gamma}^k$中的最优状态序列,所以有<br></p>
<p>$c(q^*\ \mid\ x) \leq c(q^{\prime}\ \mid\ x) \leq c(q\ \mid\ x).$<br></p>
<p>得证。</p>
<h5 id="如何计算得到最优状态序列？"><a href="#如何计算得到最优状态序列？" class="headerlink" title="如何计算得到最优状态序列？"></a>如何计算得到最优状态序列？</h5><p>令$C_j(t)$是对于输入$x_1, x_2, \cdots, x_n$以状态$q_j$结尾的最小代价值。<br>$C_j(t) = -\ln f_j(x_t) + min_l(C_l(t-1) + \tau(l,j))$, 并且$C_0(0)=0, C_j(0)=\infty\ j&gt;0$.</p>
<p>源代码：</p>
<pre><code>#include &lt;iostream&gt;
#include &lt;algorithm&gt;
#include &lt;fstream&gt;
#include &lt;vector&gt;
#include &lt;fstream&gt;
#include &lt;string&gt;
#include &lt;boost/lexical_cast.hpp&gt;
#include &lt;boost/algorithm/string/trim.hpp&gt;

using namespace std;

struct Node {
    int const state;
    double const w;
    Node *parent;
    Node(int s, Node *p, double w): state(s), parent(p), w(w) {}
};

double logf(vector&lt;double&gt; const&amp; alpha, vector&lt;double&gt; const&amp; ln_alpha, int i, double x){
    return ln_alpha[i] - alpha[i] * x;
}

double tou(double gammalogn, int i, int j){
    return i &gt;= j ? 0.0 :(j - i) * gammalogn;
}

vector&lt;int&gt; kleinberg_algorithm(vector&lt;double&gt; timeseries, double alpha0, double const s=2, double const gamma=1.0){
    // The number of events.
    size_t N = timeseries.size();

    // Calculate time intervals between successive events.
    vector&lt;double&gt; intervals(N-1);
    for(size_t i=0; i&lt;intervals.size(); i++){
        intervals[i] = timeseries[i+1] - timeseries[i];
    }

    // The minimum interval.
    double const delta = *min_element(intervals.begin(), intervals.end());

    // The time length of the whole timeseries.
    double const T = timeseries.back() - timeseries.front();

    // The upper limit of burst levels.
    int const K = int(ceil(1 + log(T/delta) / log(s)));
    // int const K = 2;

    // Set alpha and ln_alpha
    vector&lt;double&gt; alpha(K);
    vector&lt;double&gt; ln_alpha(K);
    alpha[0] = N / T;
    // alpha[0] = alpha0;
    ln_alpha[0] = log(alpha[0]);
    for(int i=1; i&lt;K; i++){
        alpha[i] = s * alpha[i-1];
        ln_alpha[i] = log(alpha[i]);
    }

    double const gammalogn = gamma * log(double(N));

    vector&lt;Node*&gt; q(K);
    for(auto &amp;it : q){
        it = NULL;
    }
    vector&lt;double&gt; C(K, numeric_limits&lt;double&gt;::infinity());
    C[0] = 0;

    // Start optimization.
    for(auto it : intervals){
        double interval = it;
        vector&lt;Node*&gt; q_new(K);
        vector&lt;double&gt; C_new(K);
        for(int i=0; i&lt;K; i++){
            vector&lt;double&gt; c(K);
            for(int j=0; j&lt;K; j++){
                c[j] = C[j] + tou(gammalogn, j, i);
            }
            size_t const j_min = min_element(c.begin(), c.end()) - c.begin();
            C_new[i] = -logf(alpha, ln_alpha, i, interval) + c[j_min];
            q_new[i] = new Node(i, q[j_min], C_new[i]);
        }

        q_new.swap(q);
        C_new.swap(C);
    }

    size_t const seq_min = min_element(C.begin(), C.end()) - C.begin();
    vector&lt;int&gt; bursts(N);
    size_t count = 0;
    for(Node* p=q[seq_min]; p!=NULL; p=p-&gt;parent){
        bursts[N - ++count] = p-&gt;state;
        // cout &lt;&lt; p-&gt;state &lt;&lt; &quot; : &quot; &lt;&lt; p-&gt;w &lt;&lt; endl;
    }

    return bursts;
}
int main(int argc, char** argv){
    if(argc &lt; 4){
        cerr &lt;&lt; &quot;Usage: a.out s gamma time-stamp-file&quot; &lt;&lt; endl;
        exit(1);
    }

    double const s = boost::lexical_cast&lt;double&gt;(argv[1]);
    double const gamma = boost::lexical_cast&lt;double&gt;(argv[2]);
    double alpha0 = boost::lexical_cast&lt;double&gt;(argv[3]);
    ifstream ifs(argv[4]);

    vector&lt;double&gt; timeseries;

    for(string line; getline(ifs, line);){
        boost::trim(line);
        timeseries.push_back(boost::lexical_cast&lt;double&gt;(line));
    }

    vector&lt;int&gt; bursts = kleinberg_algorithm(timeseries, alpha0, s, gamma);

    for(auto it : bursts){
        cout &lt;&lt; it &lt;&lt; endl;
    }

}
</code></pre><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p>1.<a href="https://zh.wikipedia.org/wiki/Wikipedia:%E9%A6%96%E9%A1%B5" target="_blank" rel="external">维基百科</a><br>2.<a href="http://dencity.jp/misc/kleinberg_burst/" target="_blank" rel="external">Kleinberg’s Burst Detection Algorithm</a><br>3.<a href="http://iv.slis.indiana.edu/sw/burst.html" target="_blank" rel="external">http://iv.slis.indiana.edu/sw/burst.html</a><br>4.<a href="https://www.cs.cornell.edu/home/kleinber/bhs.pdf" target="_blank" rel="external">https://www.cs.cornell.edu/home/kleinber/bhs.pdf</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zozoz.github.io/2015/12/16/Kleinberg/" data-id="cil29t10o000bvtjg9y5uro16" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/BurstDetection/">BurstDetection</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-安装配置" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/20/安装配置/" class="article-date">
  <time datetime="2015-10-20T11:26:54.000Z" itemprop="datePublished">2015-10-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/20/安装配置/">安装配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Ubuntu下使用ssh-keygen设置SHH无密码登录"><a href="#Ubuntu下使用ssh-keygen设置SHH无密码登录" class="headerlink" title="Ubuntu下使用ssh-keygen设置SHH无密码登录"></a>Ubuntu下使用ssh-keygen设置SHH无密码登录</h2><h4 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h4><p>1.安装<code>openssh-server</code>和<code>openssh-client</code>(只按server即可)</p>
<pre><code>sudo apt-get install openssh-client openssh-server
</code></pre><p>2.在<code>~/.ssh</code>下新建文件<code>authorized_keys</code></p>
<h4 id="客户机"><a href="#客户机" class="headerlink" title="客户机"></a>客户机</h4><p>1.生成公钥和私钥</p>
<pre><code>ssh-keygen -t rsa
</code></pre><p>2.只需把本机上生成的公钥加到需要登录的服务器的<code>~/.ssh/authorized_keys</code>中</p>
<p>3.登录</p>
<pre><code>ssh server_name@server_ip
</code></pre><p>4.用别名登录</p>
<p>在本地<code>~/.ssh/config</code>中添加:</p>
<pre><code>HOST vps1
HostName *.*.*.*
User *
Port *(一般是22)
IdentityFile ~/.ssh/id_rsa
ForwardAgent yes
</code></pre><p>以后就可以直接用<code>ssh vps1</code>登录了</p>
<h4 id="服务器和客户机之间文件拷贝"><a href="#服务器和客户机之间文件拷贝" class="headerlink" title="服务器和客户机之间文件拷贝"></a>服务器和客户机之间文件拷贝</h4><p>1.客户机-&gt;服务器</p>
<pre><code>scp [-r] local_file server_name@server_ip:server_path
</code></pre><p>2.服务器-&gt;客户机</p>
<pre><code>scp [-r] server_name@server_ip:server_file local_path
</code></pre><h2 id="Ubuntu-14-04-下安装Scrapy"><a href="#Ubuntu-14-04-下安装Scrapy" class="headerlink" title="Ubuntu 14.04 下安装Scrapy"></a>Ubuntu 14.04 下安装Scrapy</h2><pre><code>sudo apt-get install python-pip

sudo apt-get install python-dev libxml2-dev libxslt-dev

sudo apt-get install python-lxml

sudo apt-get install libffi-dev

sudo apt-get install libssl-dev

sudo pip install scrapy
</code></pre><h2 id="Ubuntu-14-04-下安装MySQL"><a href="#Ubuntu-14-04-下安装MySQL" class="headerlink" title="Ubuntu 14.04 下安装MySQL"></a>Ubuntu 14.04 下安装MySQL</h2><pre><code>sudo apt-get install mysql-server
sudo apt-get install mysql-client
sudo apt-get install mysql-workbench
sudo apt-get install libmysqlclient-dev
sudo pip install MySQL-python
</code></pre><h3 id="配置MySQL支持远程访问"><a href="#配置MySQL支持远程访问" class="headerlink" title="配置MySQL支持远程访问"></a>配置MySQL支持远程访问</h3><p>修改配置文件<code>sudo vim /etc/mysql/my.cnf</code><br>将<code>bind 127.0.0.1</code>注释掉<br>添加授权<code>mysql -u root -p</code></p>
<pre><code>GRANT ALL PRIVILEGES ON *.* TO &apos;root&apos;@&apos;%&apos; IDENTIFIED BY &apos;YOURPASSWORD&apos; WITH GRANT OPTION;
</code></pre><p>自行替换上句中的IP地址和密码<br>重启MySQL<code>sudo service mysql restart</code></p>
<h2 id="配置uwsgi"><a href="#配置uwsgi" class="headerlink" title="配置uwsgi"></a>配置uwsgi</h2><p><code>uwsgi.ini</code>文件</p>
<pre><code>[uwsgi]
socket=127.0.0.1:3400
chdir=/root/NUST_Visual_Platform
module=NUST_Visual_Platform.wsgi:application
master=True
processes=2
#home=/root/NUST_Visual_Platform/
max-requests=5000
vacuum=True
chmod-socket=664
</code></pre><p>启动</p>
<pre><code>uwsgi --ini uwsgi.ini
</code></pre><h2 id="Ubuntu-14-04-下Nginx配置"><a href="#Ubuntu-14-04-下Nginx配置" class="headerlink" title="Ubuntu 14.04 下Nginx配置"></a>Ubuntu 14.04 下Nginx配置</h2><p>1.安装Nginx</p>
<pre><code>sudo apt-get install nginx
</code></pre><p>2.在<code>/etc/nginx/conf.d/</code>文件夹下面创建<code>xxx.conf</code>文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">server &#123;&#10;    listen 80; # default_server;&#10;    server_name 123.75.138.47 zsl.link;&#10;    charset utf-8;&#10;    client_max_body_size 100M;&#10;&#10;    location / &#123;&#10;        # First attempt to serve request as file, then&#10;        # as directory, then fall back to displaying a 404.&#10;        # itry_files $uri $uri/ =404;&#10;        # Uncomment to enable naxsi on this location&#10;        # include /etc/nginx/naxsi.rules&#10;        uwsgi_pass 127.0.0.1:3400;&#10;        include uwsgi_params;&#10;        add_header Cache-Control no-cache;&#10;        add_header Cache-Control private;&#10;    &#125;&#10;&#10;    location /static/ &#123;&#10;        alias /root/NUST_Visual_Platform/static/;&#10;        expires 30d;&#10;    &#125;&#10;&#10;    location /media/ &#123;&#10;        alias /root/NUST_Visual_Platform/njustmark/media/;&#10;        expires 30d;&#10;    &#125;&#10;&#10;    # Only for nginx-naxsi used with nginx-naxsi-ui : process denied requests&#10;    #location /RequestDenied &#123;&#10;    #   proxy_pass http://127.0.0.1:8080;&#10;    #&#125;&#10;&#10;    #error_page 404 /404.html;&#10;&#10;    # redirect server error pages to the static page /50x.html&#10;    #&#10;    error_page 500 502 503 504 /50x.html;&#10;    location = /50x.html &#123;&#10;        root /usr/share/nginx/html;&#10;    &#125;&#10;&#10;    # deny access to .htaccess files, if Apache&#39;s document root&#10;    # concurs with nginx&#39;s one&#10;    #&#10;    #location ~ /\.ht &#123;&#10;    #   deny all;&#10;    #&#125;&#10;&#125;</span><br></pre></td></tr></table></figure></p>
<p>启动Nginx</p>
<pre><code>sudo service nginx start
</code></pre><p>重启Nginx</p>
<pre><code>sudo service nginx restart
</code></pre><p>停止Nginx</p>
<pre><code>sudo service nginx stop
</code></pre><p>重新加载配置文件</p>
<pre><code>sudo nginx -s reload
</code></pre><h2 id="配置supervisor"><a href="#配置supervisor" class="headerlink" title="配置supervisor"></a>配置supervisor</h2><p>安装</p>
<pre><code>pip install supervisor
</code></pre><p>生成配置文件</p>
<pre><code>echo_supervisord_cong &gt; supervisord.conf
</code></pre><p>添加uWSGI的启动配置</p>
<pre><code>[program:django_web]
command=uwsgi --ini /root/NUST_Visual_Platform/uwsgi.ini
stopsignal=QUIT
autostart=true
autorestart=true
stdout_logfile=/root/NUST_Visual_Platform/uwsgi.log
redirect_stderr=true
</code></pre><p>在配置文件目录下启动</p>
<pre><code>sudo supervisord -c supervisord.conf
</code></pre><p>手动启动</p>
<pre><code>sudo supervisorctl start xxx
</code></pre><p>停止</p>
<pre><code>sudo supervisorctl stop xxx
</code></pre><p>查看状态</p>
<pre><code>sudo supervisorctl status
</code></pre><h2 id="安装redis"><a href="#安装redis" class="headerlink" title="安装redis"></a>安装redis</h2><pre><code>sudo apt-get install redis-server
sudo pip install redis
</code></pre><h2 id="安装mongodb"><a href="#安装mongodb" class="headerlink" title="安装mongodb"></a>安装mongodb</h2><pre><code>sudo apt-get install mongodb
sudo pip install pymongo
</code></pre>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://zozoz.github.io/2015/10/20/安装配置/" data-id="cil29t1020003vtjg0atzodog" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/运维/">运维</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-BP算法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/23/BP算法/" class="article-date">
  <time datetime="2015-09-23T06:18:06.000Z" itemprop="datePublished">2015-09-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/23/BP算法/">BP算法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>符号表示：</p>
<p>$ w_{kj}^l：l-1层j节点到l层k节点的权重；z_k^l: l层k节点的输入值；\alpha_k^l: l层k节点的输出 $ <br><br>$ z^l=w^la^{l-1}+b^l; a^l=\sigma(z^l) $ <br></p>
<h2 id="①-BP网络前向传播计算"><a href="#①-BP网络前向传播计算" class="headerlink" title="① BP网络前向传播计算"></a>① BP网络前向传播计算</h2><p>$ z^l = w^la^{l-1}+b^l $ <br><br>$ a^l = \sigma(z^l) = \frac{1}{1 + e^{-z^l}} $</p>
<h2 id="②-BP网络后向传播求偏导"><a href="#②-BP网络后向传播求偏导" class="headerlink" title="② BP网络后向传播求偏导"></a>② BP网络后向传播求偏导</h2><p>$ C=\frac{1}{2n} \sum_x |y(x)-a^L(x)|^2 $</p>
<p>$$\Delta W_{kj}^l = \frac{\partial C}{\partial w_{kj}^l} = \frac{\partial C}{\partial z^l_k} * \frac{\partial z^l_k}{\partial w^l_{kj}} =<br>\delta^l_k \frac{\partial z^l_k}{\partial w^l_{kj}}$$</p>
<p>其中，$\delta^l_k \equiv \frac{\partial C}{\partial z^l_k}$</p>
<p>又, $\frac{\partial z^l_k}{\partial w^l_{kj}} = a^{l-1}_j$</p>
<p>所以,$\Delta W^l_{kj} = \delta^l_k a^{l-1}_j$</p>
<p>同理，$\Delta b^l_k = \delta^l_k$</p>
<p>$$ \delta^l_k = \frac{\partial C}{\partial z^l_k} = \sum_j \frac{\partial C}{\partial z^{l+1}_j} \frac{\partial z^{l+1}_j}{\partial z^l_k} =<br>\sum_j \delta^{l+1}_j \frac{\partial z^{l+1}_j}{\partial z^l_k} $$</p>
<p>又，$ \frac{\partial z^{l+1}_j}{\partial z^l_k} = w^{l+1}_{jk} \sigma^\prime(z^l_k) $</p>
<p>所以,<br>$ \delta^l_k = \sum_j \delta^{l+1}_j w^{l+1}_{jk} \sigma^\prime(z^l_k) $<br>$ \Downarrow $ vectorize<br>$ \delta^l = (w^{l+1})^T \delta^{l+1} \bigodot \sigma^\prime(z^l)  $</p>
<p>对于最后一层L层，<br>$ \delta^L = \frac{\partial C}{\partial z^L} = (y - a^L) \bigodot a^\prime  $</p>
<h2 id="Backpropagation-Algorithm"><a href="#Backpropagation-Algorithm" class="headerlink" title="Backpropagation Algorithm"></a>Backpropagation Algorithm</h2><ol>
<li>Input x: Set the corresponding activetion $a$ for the input layer.</li>
<li>Feedforward： For each l=2, 3, …, L compute $z^l = w^la^{l-1} + b^l$ and $a^l = \sigma(z^l)$.</li>
<li>Output Error $\delta^L$: Compute the vector $\delta^L = \Delta_aC \bigodot \sigma\prime(z^L)$.</li>
<li>Backpropagate the error: For each l=L-1, L-2, …, 2 compute $\delta^l = (w^{l+1})^T \delta^{l+1} \bigodot \sigma\prime(z^l)$.</li>
<li>Output: The gradient of the cost function in given by $\frac{\partial C}{\partial w_{kj}^l} = a^{l-1}_j \delta_k^l$ and $ \frac{\partial C}{\partial b_k^l} = \delta_k^l$.</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zozoz.github.io/2015/09/23/BP算法/" data-id="cil29t0zq0000vtjg6ah6otc8" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/NN/">NN</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-django快速搭建一个网站" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/28/django快速搭建一个网站/" class="article-date">
  <time datetime="2015-08-28T06:23:11.000Z" itemprop="datePublished">2015-08-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/28/django快速搭建一个网站/">Django快速搭建一个网站</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="Django介绍"><a href="#Django介绍" class="headerlink" title="Django介绍"></a>Django介绍</h2><p>参考文档：<br><a href="https://docs.djangoproject.com/en/1.8/" target="_blank" rel="external">Django官方文档</a>   <a href="http://python.usyiyi.cn/django/index.html" target="_blank" rel="external">官方文档中文翻译</a></p>
<p>Django是一个开放源代码的Web应用框架，由Python写成，基于MVC构造。但是在Django中，控制器接受用户输入的部分由框架自行处理,<br>所以Django里更关注的是模型（Model）、模板（Template）和视图（Views），称为MTV模式。一个Django应用程序的基本目录结构如下：</p>
<pre><code>project_name/
    project_name/
        __init__.py
        settings.py
        urls.py
        *views.py
        wsgi.py
    manage.py
    *static/
        base/
            css/
                bootstrap.min.css
            js/
                bootstrap.min.js
    *templates/
        index.html
        base.html
        app_name/
            show.html
    *app_name/
        __init__.py
        admin.py
        urls.py
        views.py
        models.py
        forms.py
        tests.py
</code></pre><p>模型(Model),即数据存取层———处理与数据相关的所有事务：如何存取、如何验证有效性、包含哪些行为以及数据之间的关系等.<br>模板(Template),即表现层 ———处理与表现相关的决定：如何在页面或者其他类型文档中进行显示.<br>视图(View),即业务逻辑层 ———存取模型及调取恰当模板的相关逻辑，模型与模板之间的桥梁.</p>
<h5 id="Django-如何处理一个请求"><a href="#Django-如何处理一个请求" class="headerlink" title="Django 如何处理一个请求"></a>Django 如何处理一个请求</h5><p>当一个用户请求Django站点的一个页面，下面是Django系统决定执行哪个Python代码使用的算法：</p>
<ol>
<li>Django决定要使用的根URLconf模块。通常，这个值就是<strong>ROOT_URLCONF</strong>的设置.</li>
<li>Django加载该Python模块并寻找可用的<strong>urlpatterns</strong>它是<strong>django.conf.urls.url()</strong>实例的一个Python列表。</li>
<li>Django依次匹配每个URL模式，在与请求的URL匹配的第一个模式停下来。</li>
<li>一旦其中的一个正则表达式匹配上，Django将导入并调用给出的视图,它是一个简单的Python函数(或者一个基于类的视图)。视图将获得如下参数:<ul>
<li>一个HttpRequest 实例。</li>
<li>如果匹配的正则表达式没有返回命名的组，那么正则表达式匹配的内容将作为位置参数提供给视图。</li>
<li>关键字参数由正则表达式匹配的命名组组成，但是可以被<strong>django.conf.urls.url()</strong>的可选参数kwargs覆盖。<br>如果视图返回时调用了模板，调用<code>templates</code>下面的html进行渲染展示。</li>
</ul>
</li>
<li>如果没有匹配到正则表达式，或者如果过程中抛出一个异常，Django将调用一个适当的错误处理视图。</li>
</ol>
<p><img src="http://7xnepc.com1.z0.glb.clouddn.com/流程图.png" alt="流程图 0.1"></p>
<h2 id="快速搭建一个网站"><a href="#快速搭建一个网站" class="headerlink" title="快速搭建一个网站"></a>快速搭建一个网站</h2><h3 id="安装Python和Django"><a href="#安装Python和Django" class="headerlink" title="安装Python和Django"></a>安装Python和Django</h3><p>Python 2.7.*版本，Django 1.8.3版本，由于系统的不同，安装过程稍有不同。</p>
<h3 id="网站搭建"><a href="#网站搭建" class="headerlink" title="网站搭建"></a>网站搭建</h3><h4 id="新建一个工程"><a href="#新建一个工程" class="headerlink" title="新建一个工程"></a>新建一个工程</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">django-admin startproject mysite</span><br></pre></td></tr></table></figure>
<p>目录结构如上面所示，然后我们在<strong>mysite</strong>下面新建一个<code>views.py</code>视图文件，在视图文件中定义我们的视图.<br><code>mysite/views.py</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from django.shortcuts import render&#10;&#10;&#10;def index(request):&#10;    return render(request, &#39;index.html&#39;)</span><br></pre></td></tr></table></figure></p>
<p>在<code>templates</code>目录下面新建<code>index.html</code>文件.<br><code>templates/index.html</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;html&#62;&#10;&#60;head&#62;&#60;title&#62;My First Website!&#60;/title&#62;&#60;/head&#62;&#10;&#60;body&#62;&#60;p&#62;Hello World!&#60;/p&#62;&#60;/body&#62;&#10;&#60;/html&#62;</span><br></pre></td></tr></table></figure></p>
<p>需要在<code>settings.py</code>中设置模板的路径.<br><code>mysite/settings.py</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATES = [&#10;    &#123;&#10;        &#39;DIRS&#39;: [os.path.join(BASE_DIR, &#39;templates&#39;)],&#10;    &#125;,&#10;]</span><br></pre></td></tr></table></figure></p>
<p>在<code>urls.py</code>中配置URL访问规则.<br><code>mysite/urls.py</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from django.conf.urls import patterns, url&#10;from . import views&#10;&#10;&#10;urlpatterns = patterns(&#39;&#39;,&#10;    url(r&#39;^$&#39;, views.index, name=&#39;index&#39;),&#10;)</span><br></pre></td></tr></table></figure></p>
<p>启动本地Django服务器运行我们的网站程序.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py runserver 8000</span><br></pre></td></tr></table></figure></p>
<p>在浏览器中打开<code>localhost:8000</code>会看到我们的欢迎页面.</p>
<h4 id="在工程下面添加一个应用"><a href="#在工程下面添加一个应用" class="headerlink" title="在工程下面添加一个应用"></a>在工程下面添加一个应用</h4><p>一个网站可能分为不同的模块，每个模块来实现不同的功能，对于每一个模块我们类比于Django中的APP，每一个APP用来实现不同的功能，使框架低耦合。<br>新建一个应用：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py startapp app_name</span><br></pre></td></tr></table></figure></p>
<p>然后在<strong>project_name/settings.py</strong>中包含这个应用.<br><code>settings.py</code></p>
<pre><code>INSTALLED_APPS = (
    ...,
    &apos;app_name&apos;,
)
</code></pre><p>运行<code>python manage.py startapp sample</code>新建一个名为<strong>sample</strong>的应用，来展示我们的例子.</p>
<h4 id="URL调度器"><a href="#URL调度器" class="headerlink" title="URL调度器"></a>URL调度器</h4><p>官方文档 <a href="http://python.usyiyi.cn/django/topics/http/urls.html#error-handling" target="_blank" rel="external">中文</a> <a href="https://docs.djangoproject.com/en/1.8/topics/http/urls/" target="_blank" rel="external">英文</a><br>简洁、优雅的URL模式在高质量的Web应用中是非常重要的细节。Django中为了给一个应用设计URL，需要创建一个Python模块，通常称为<strong>URLconf</strong>(URL configuration,就是前面的<code>urls.py</code>).<br>这个模块是纯粹的Python代码，它包含URL模式（简单的正则表达式）到Python函数或类（<code>views.py</code>中的函数或类）的简单映射。<br>下面是一个简单的例子：<br><code>mysite/urls.py</code></p>
<pre><code>from django.conf.urls import include, url
from . import views
urlpatterns = [
    # url(r&apos;^admin/&apos;, include(admin.site.urls)),
    url(r&apos;^$&apos;, views.index, name=&quot;index&quot;),
    url(r&apos;^sample/&apos;, include(&apos;sample.urls&apos;, namespace=&quot;sample&quot;)),
]
</code></pre><p><code>sample/urls.py</code></p>
<pre><code>from django.conf.urls import url
from . import views
urlpatterns = [
    url(r&apos;^$&apos;, views.index, name=&apos;index&apos;),
    url(r&apos;^([0-9]{2})$&apos;, views.show_1, name=&apos;show_1&apos;),
    url(r&apos;^(?P&lt;year&gt;[0-9]{4})&apos;, views.show_2, name=&apos;show_2&apos;),
]
</code></pre><ul>
<li>在任何时候,urlpatterns都可以包含其他URLconf模块。这实际上是将包含的URL放置在此处。例如在上面中，把APP中的URLconf包含在<strong>ROOT_URLCONF</strong>中。</li>
<li>上面的示例中使用简单的正则表达式对URL进行匹配，符合Python的正则表达式语法。例如，可以通过圆括号来捕获URL中的值并以位置参数传递给视图，通过命名正则表达式组(?P&lt;name&gt;pattern)，其中name是组的名字，pattern是要匹配的模式，来传递命名参数给视图。</li>
<li>匹配按照顺序从上往下进行，直到匹配到满足的结束。</li>
</ul>
<h4 id="模板语言"><a href="#模板语言" class="headerlink" title="模板语言"></a>模板语言</h4><p>Django的模板系统将页面的设计从Python中分离出来，前台页面只需接收后台视图传递过来的数据，动态地展示页面。<br><code>templates/navbar.html</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;html&#62;&#10;&#60;head&#62;&#60;title&#62;&#123;% block title %&#125;&#123;% endblock %&#125;&#60;/title&#62;&#60;/head&#62;&#10;&#60;body&#62;&#10;&#123;% block content %&#125;&#123;% endblock content %&#125;&#10;&#60;/body&#62;&#10;&#60;/html&#62;</span><br></pre></td></tr></table></figure></p>
<p><code>templates/sample/show.html</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#34;navbar.html&#34; %&#125;&#10;&#123;% block title %&#125; Sample Page &#123;% endblock %&#125;&#10;&#123;% block content %&#125;&#10;&#10;&#123;% if index %&#125;&#10;    &#60;p&#62;I am sample!&#60;/p&#62;&#10;&#123;% else%&#125;&#10;    &#123;% if value|length_is:&#34;4&#34; %&#125;&#10;        &#60;p&#62;The year is &#123;&#123; value &#125;&#125;&#60;/p&#62;&#10;    &#123;% elif value|length_is:&#34;2&#34; %&#125;&#10;        &#60;p&#62;The month is &#123;&#123; value &#125;&#125;&#60;/p&#62;&#10;    &#123;% endif %&#125;&#10;&#123;% endif %&#125;&#10;&#60;p&#62;My name is &#123;&#123; info.name &#125;&#125;, enrolled in &#123;&#123; info.enroll &#125;&#125;.&#60;/p&#62;&#10;&#123;# I am comments. #&#125;&#10;&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>{{ variable }} 表示一个变量,当模版引擎遇到一个变量，它将计算这个变量，然后用结果替换掉它本身。变量的命名包括任何字母数字以及下划线 (“_”)的组合。点(“.”) 也在会变量部分中出现，不过它有特殊的含义，当模板系统遇到点(“.”)，它将以这样的顺序查询：<ul>
<li>字典查询</li>
<li>属性或方法查询</li>
<li>数字索引查询</li>
</ul>
</li>
<li>Django自带了大约24个内置的模版标签。可以在<a href="http://python.usyiyi.cn/django/ref/templates/builtins.html#ref-templates-builtins-tags" target="_blank" rel="external">内置标签参考手册</a>中阅读全部关于它们的内容。</li>
<li>{{ value|length_is:"4" }} 表示一个过滤器,Django提供了大约六十个内置的模版过滤器。你可以在<a href="http://python.usyiyi.cn/django/ref/templates/builtins.html#ref-templates-builtins-filters" target="_blank" rel="external">内置过滤器参考手册</a>中阅读全部关于它们的信息。</li>
<li>表示一个单行注释， {% comment %}和{% endcomment %}表示多行注释，之间的内容会被忽略。</li>
<li>{% csrf_token %} 是一个跨站请求伪造保护标签，在提交表单中需要添加。</li>
<li>{% extends "*.html" %} 表示一个模板继承标签，当模板系统处理这个模板时，首先，它将定位父模板，并用子模板中的内容来替换父模板中的block标签中的内容。</li>
</ul>
<h4 id="视图模块"><a href="#视图模块" class="headerlink" title="视图模块"></a>视图模块</h4><p>一个视图函数，简称视图，是一个简单的Python 函数，它接受Web请求并且返回Web响应。响应可以是一张网页的HTML内容，一个重定向，一个404错误，一个XML文档，或者一张图片. . . 是任何东西都可以。无论视图本身包含什么逻辑，都要返回响应。代码写在哪里也无所谓，只要它在你的Python目录下面。除此之外没有更多的要求了——可以说“没有什么神奇的地方”。为了能够把代码放在某个地方，惯例是把视图放在叫做views.py的文件中，然后把它放到你的项目或者应用目录里。<br><code>sample/views.py</code></p>
<pre><code>from django.shortcuts import render


def index(request):
    return render(request, &apos;sample/show.html&apos;, {
        &apos;index&apos;: True
    })

def show_1(request, month):
    return render(request, &apos;sample/show.html&apos;, {
        &apos;value&apos;: month
    })

def show_2(request, year):
    info = {&apos;name&apos;: &apos;newbie&apos;, &apos;enroll&apos;: year}
    return render(request, &apos;sample/show.html&apos;, {
        &apos;value&apos;: year,
        &apos;info&apos;: info,
    })
</code></pre><p>视图模块主要是进行业务逻辑的处理，然后返回一个<strong>HttpResponse</strong>对象。<br>主要介绍一下表单。</p>
<h5 id="HTML表单"><a href="#HTML表单" class="headerlink" title="HTML表单"></a><a href="http://python.usyiyi.cn/django/topics/forms/index.html" target="_blank" rel="external">HTML表单</a></h5><p>在HTML中，表单是位于&lt;form&gt;…&lt;/form&gt; 之间的元素的集合，它们允许访问者输入文本、选择选项、操作对象和控制等等，然后将信息发送回服务器。<br>处理表单是一件很复杂的事情。考虑一下Django 的Admin 站点，不同类型的大量数据项需要在一个表单中准备好、渲染成HTML、使用一个方便的界面编辑、返回给服务器、验证并清除，然后保存或者向后继续处理。</p>
<p>Django 的表单功能可以简化并自动化大部分这些工作，而且还可以比大部分程序员自己所编写的代码更安全。</p>
<p>Django 会处理表单工作中的三个显著不同的部分：</p>
<ul>
<li>准备并重新构造数据</li>
<li>为数据创建HTML 表单</li>
<li>接收并处理客户端提交的表单和数据<br>可以手工编写代码来实现，但是Django 可以帮你完成所有这些工作。</li>
</ul>
<p>在Django中构建一个表单<br><code>sample/forms.py</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from django import forms&#10;&#10;&#10;class NameForm&#65288;forms.Form):&#10;    your_name = forms.CharField(label=&#39;Your name&#39;, max_length=100, required=True)&#10;    age = forms.IntegerField(initial=0)</span><br></pre></td></tr></table></figure></p>
<p>表单系统的核心部分是Django的<a href="http://python.usyiyi.cn/django/ref/forms/fields.html" target="_blank" rel="external">Form</a>类.Django 的模型描述一个对象的逻辑结构、行为以及展现给我们的方式，与此类似，Form 类描述一个表单并决定它如何工作和展现.<br>就像模型类的属性映射到数据库的属性一样，表单类的<a href="http://python.usyiyi.cn/django/ref/forms/fields.html" target="_blank" rel="external">字段</a>会映射到HTML 的&lt;input&gt;表单的元素.<br>表单的字段本身也是类；它们管理表单的数据并在表单提交时进行验证。</p>
<p><code>templates/sample/form.html</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#34;base.html&#34; %&#125;&#10;&#123;% block title %&#125; Sample Page &#123;% endblock %&#125;&#10;&#123;% block content %&#125;&#10;&#10;&#60;form action=&#34;&#123;% url &#39;sample:get_name&#39; %&#125;&#34; method=&#34;post&#34;&#62;&#10;    &#123;% csrf_token %&#125;&#10;    &#123;&#123; form &#125;&#125;&#10;    &#60;input type=&#34;submit&#34; value=&#34;Submit&#34; /&#62;&#10;&#60;/form&#62;&#10;&#10;&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>
<p><code>sample/views.py</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from .forms import NameForm&#10;&#10;&#10;def get_name(request):&#10;    # if this is a POST request we need to process the form data&#10;    if request.method == &#39;POST&#39;:&#10;        # create a form instance and populate it with data from the request:&#10;        form = NameForm(request.POST)&#10;        # check whether it&#39;s valid:&#10;        if form.is_valid():&#10;            name = form.cleaned_data[&#39;your_name&#39;]&#10;            age = form.cleaned_data[&#39;age&#39;]&#10;            return render(request, &#39;sample/success.html&#39;, &#123;&#10;                    &#39;name&#39;: name,&#10;                    &#39;age&#39;: age&#10;                &#125;)&#10;    else:&#10;        form = NameForm()&#10;    return render(request, &#39;sample/form.html&#39;, &#123;&#39;form&#39;: form&#125;)</span><br></pre></td></tr></table></figure></p>
<p><code>sample/success.html</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;html&#62;&#10;    &#60;head&#62;&#60;title&#62;Success&#60;/title&#62;title&#62;&#60;/head&#62;&#10;     &#60;body&#62;&#10;        &#60;p&#62;Success!&#60;/p&#62;&#10;        &#60;p&#62;Your name is &#123;&#123; name &#125;&#125;, aged &#123;&#123; age &#125;&#125;.&#60;/p&#62;&#10;        &#60;a href=&#39;&#123;% url &#39;sample:get_name&#39; %&#125;&#39;&#62;&#36820;&#22238;&#60;/a&#62;&#10;     &#60;/body&#62;&#10;&#60;/html&#62;</span><br></pre></td></tr></table></figure></p>
<h4 id="建立数据库连接"><a href="#建立数据库连接" class="headerlink" title="建立数据库连接"></a>建立数据库连接</h4><p>由于我们需要从数据库中读取我们抓取的热点新闻信息，所以需要连接数据库，这里我们采用MYSQL.<br>在<strong>project_name/settings.py</strong>中默认的数据库是Python自带的SQLite3，所以我们需要修改一下配置.</p>
<p><code>settings.py</code></p>
<pre><code>DATABASES = {
    &apos;default&apos;: {
        &apos;ENGINE&apos;: &apos;django.db.backends.mysql&apos;, # database engine
        &apos;NAME&apos;: &apos;nust_visual_platform&apos;, # schema name
        &apos;USER&apos;: &apos;root&apos;, # mysql username
        &apos;HOST&apos;: &apos;localhost&apos;, # mysql host
        &apos;PASSWORD&apos;: &apos;&apos;, # mysql password
        &apos;PORT&apos;: &apos;3306&apos;} # mysql port
}
</code></pre><p>我们需要在MYSQL中新建一个schema，剩下的所有对数据库的操作都不需要我们手动处理，Django会为我们代劳.</p>
<p>新建一个数据库表：</p>
<ol>
<li><p>在<code>wangyi</code>下面新建<code>models.py</code>模型文件，然后在文件中定义我们的数据库表.</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from django.db import models&#10;&#10;&#10;class WangyiArticle&#65288;models.Model):&#10;    docid = models.CharField(primary_key=True, max_length=50)&#10;    votecount = models.IntegerField(default=0)&#10;    content = models.TextField()&#10;    ptime = models.DateTimeField()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>具体细节可查看Django提供的全部模型字段的<a href="http://python.usyiyi.cn/django/ref/models/fields.html#field-options" target="_blank" rel="external">字段选项</a>和<a href="http://python.usyiyi.cn/django/ref/models/fields.html#field-types" target="_blank" rel="external">字段类型</a>的API。</p>
<p>2.运行命令来生成产生数据表的SQL代码.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py makemigrations wangyi</span><br></pre></td></tr></table></figure></p>
<p>我们可以看到类似下面的信息：</p>
<pre><code>Migrations for &apos;wangyi&apos;:
    0001_initial.py:
        - Create model WangyiArticle
</code></pre><p>3.在数据库中生成数据表<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py migrate wangyi</span><br></pre></td></tr></table></figure></p>
<p>如果你的数据库中其实已经有这张表存在了，就不要执行SQL去改变数据表，这时需要运行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python manage.py migrate wangyi --fake-initial</span><br></pre></td></tr></table></figure></p>
<p>4.对数据表进行URD操作<br>对数据表的操作可以在<code>models.py</code>中也可以在<code>views.py</code>中，这里我们只介绍如何在<code>views.py</code>中操作数据表.<br>遍历数据表：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WangyiArticle.objects</span><br></pre></td></tr></table></figure></p>
<p>对获取的数据进行筛选：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WangyiArticle.objects.filter(ptime__lt=today)&#10;                     .filter(mtime__gel=yesterday)&#10;                     .filter(parent_id=&#39;&#39;)&#10;                     .order_by(&#39;-votecount&#39;)[:10]</span><br></pre></td></tr></table></figure></p>
<p>Django的ORM(Object Relational Mapping)功能很强大，具体的其他细节可以参考<a href="https://docs.djangoproject.com/en/1.8/topics/db/" target="_blank" rel="external">官方文档</a></p>
<h4 id="自动分页功能"><a href="#自动分页功能" class="headerlink" title="自动分页功能"></a>自动分页功能</h4><h5 id="1-安装"><a href="#1-安装" class="headerlink" title="1. 安装"></a>1. 安装</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install python-pagination</span><br></pre></td></tr></table></figure>
<h5 id="2-配置"><a href="#2-配置" class="headerlink" title="2. 配置"></a>2. 配置</h5><p><a href="https://pypi.python.org/pypi/django-pagination" target="_blank" rel="external">参考官方文档</a></p>
<p>说明：django1.4开始，<code>TEMPLATE_CONTEXT_PROCESSORS</code>不显示在<code>settings.py</code>文件中，此时需要自己添加<br>在<code>settings.py</code>开头添加<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import django.conf.global_settings as DEFAULT_SETTINGS</span><br></pre></td></tr></table></figure></p>
<p>在配置最后添加<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATE_CONTEXT_PROCESSORS = DEFAULT_SETTINGS.TEMPLATE_CONTEXT_PROCESSORS + (</span><br><span class="line">    <span class="string">"django.contrib.auth.context_processors.auth"</span>,</span><br><span class="line">    <span class="string">"django.core.context_processors.debug"</span>,</span><br><span class="line">    <span class="string">"django.core.context_processors.i18n"</span>,</span><br><span class="line">    <span class="string">"django.core.context_processors.media"</span>,</span><br><span class="line">    <span class="string">"django.core.context_processors.request"</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<h5 id="3-修改默认样式"><a href="#3-修改默认样式" class="headerlink" title="3. 修改默认样式"></a>3. 修改默认样式</h5><p>将<code>site-packages/pagination/templates/pagination/pagination.html</code>文件复制<br>到<code>your_own_templates/pagination/pagination.html</code>，然后修改这个文件就可以了.</p>
<h5 id="4-参阅资料"><a href="#4-参阅资料" class="headerlink" title="4. 参阅资料"></a>4. 参阅资料</h5><p><a href="http://www.django-china.cn/topic/53/" target="_blank" rel="external">七部教你实现Django网站列表自动分页</a></p>
<h2 id="Bootstrap"><a href="#Bootstrap" class="headerlink" title="Bootstrap"></a>Bootstrap</h2><p><a href="http://v3.bootcss.com/" target="_blank" rel="external">中文文档</a> <a href="http://getbootstrap.com/" target="_blank" rel="external">英文文档</a></p>
<p>Bootstrap，来自 Twitter，是目前很受欢迎的前端框架。Bootstrap 是基于 HTML、CSS、JAVASCRIPT 的，它简洁灵活，使得 Web 开发更加快捷,是非专业网站开发人员优雅展示自己成果的利器。<br>Bootstrap是基于HTML5和CSS3开发的，它在jQuery的基础上进行了更为个性化和人性化的完善，形成一套自己独有的网站风格，并兼容大部分jQuery插件。<br>Bootstrap中包含了丰富的Web组件，根据这些组件，可以快速的搭建一个漂亮、功能完备的网站。其中包括以下组件：<br>下拉菜单、按钮组、按钮下拉菜单、导航、导航条、路径导航、分页、排版、缩略图、警告对话框、进度条、媒体对象等。</p>
<p>我们可以很方便的把Bootstrap加入到我们的网站之中，以上面的项目为例。<br><code>templates/base.html</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;html&#62;&#10;    &#60;head&#62;&#10;        &#60;title&#62;&#123;% block title %&#125;&#123;% endblock %&#125;&#60;/title&#62;&#10;        &#123;% load staticfiles %&#125;&#10;        &#60;link rel=&#34;stylesheet&#34; type=&#34;text/css&#34; href=&#34;&#123;% static &#39;base/css/bootstrap.min.css&#39; %&#125;&#34;/&#62;&#10;        &#60;script src=&#34;&#123;% static &#39;base/js/jquery-2.1.4.min.js&#39; %&#125;&#34;&#62;&#60;/script&#62;&#10;        &#60;script src=&#34;&#123;% static &#39;base/js/bootstrap.min.js&#39; %&#125;&#34;&#62;&#60;/script&#62;&#10;    &#60;/head&#62;&#10;    &#60;body&#62;&#10;        &#123;% block content %&#125;&#123;% endblock content %&#125;&#10;    &#60;/body&#62;&#10;&#60;/head&#62;</span><br></pre></td></tr></table></figure></p>
<p>只需要把bootstrap的css文件引入HTML中就可以使用它的CSS样式，但是必须在引入bootstrap.js文件之前先引入jQuery文件才能使用javascript插件。</p>
<p>在这里说一下Django的<a href="http://python.usyiyi.cn/django/intro/tutorial06.html" target="_blank" rel="external">静态文件</a>。<br>除了由服务器生成的HTML文件外，网页应用一般需要提供其它必要的文件 —— 比如图片文件、JavaScript脚本和CSS样式表 —— 来为用户呈现出一个完整的网站。 在Django中，我们将这些文件称为“静态文件”。<br>首先在mysite中创建一个static目录.Django将在那里查找静态文件，这与Django是如何在<code>templates</code>中寻找对应的模板文件的方式是一致的.需要在配置文件中设置静态文件查找目录.<br><code>settings.py</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">STATIC_URL = &#39;/static/&#39;&#10;STATICFILES_DIRS = (&#10;        os.getcwd() + &#39;/static/&#39;,&#10;)</span><br></pre></td></tr></table></figure></p>


{% load staticfiles %} 从staticfiles模板库加载{% static %} 模板标签。{% static %}模板标签会生成静态文件的绝对URL。


<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#60;!-- Standard button --&#62;&#10;&#60;button type=&#34;button&#34; class=&#34;btn btn-default&#34;&#62;&#65288;&#40664;&#35748;&#26679;&#24335;&#65289;Default&#60;/button&#62;&#10;&#10;&#60;!-- Provides extra visual weight and identifies the primary action in a set of buttons --&#62;&#10;&#60;button type=&#34;button&#34; class=&#34;btn btn-primary&#34;&#62;&#65288;&#39318;&#36873;&#39033;&#65289;Primary&#60;/button&#62;&#10;&#10;&#60;!-- Indicates a successful or positive action --&#62;&#10;&#60;button type=&#34;button&#34; class=&#34;btn btn-success&#34;&#62;&#65288;&#25104;&#21151;&#65289;Success&#60;/button&#62;&#10;&#10;&#60;!-- Contextual button for informational alert messages --&#62;&#10;&#60;button type=&#34;button&#34; class=&#34;btn btn-info&#34;&#62;&#65288;&#19968;&#33324;&#20449;&#24687;&#65289;Info&#60;/button&#62;&#10;&#10;&#60;!-- Indicates caution should be taken with this action --&#62;&#10;&#60;button type=&#34;button&#34; class=&#34;btn btn-warning&#34;&#62;&#65288;&#35686;&#21578;&#65289;Warning&#60;/button&#62;&#10;&#10;&#60;!-- Indicates a dangerous or potentially negative action --&#62;&#10;&#60;button type=&#34;button&#34; class=&#34;btn btn-danger&#34;&#62;&#65288;&#21361;&#38505;&#65289;Danger&#60;/button&#62;&#10;&#10;&#60;!-- Deemphasize a button by making it look like a link while maintaining button behavior --&#62;&#10;&#60;button type=&#34;button&#34; class=&#34;btn btn-link&#34;&#62;&#65288;&#38142;&#25509;&#65289;Link&#60;/button&#62;</span><br></pre></td></tr></table></figure>
<!-- 新 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css">

<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>

<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>

<!-- Standard button -->
<button type="button" class="btn btn-default">（默认样式）Default</button>

<!-- Provides extra visual weight and identifies the primary action in a set of buttons -->
<button type="button" class="btn btn-primary">（首选项）Primary</button>

<!-- Indicates a successful or positive action -->
<button type="button" class="btn btn-success">（成功）Success</button>

<!-- Contextual button for informational alert messages -->
<button type="button" class="btn btn-info">（一般信息）Info</button>

<!-- Indicates caution should be taken with this action -->
<button type="button" class="btn btn-warning">（警告）Warning</button>

<!-- Indicates a dangerous or potentially negative action -->
<button type="button" class="btn btn-danger">（危险）Danger</button>

<!-- Deemphasize a button by making it look like a link while maintaining button behavior -->
<button type="button" class="btn btn-link">（链接）Link</button>


<h2 id="E-charts"><a href="#E-charts" class="headerlink" title="E-charts"></a>E-charts</h2><p><a href="http://echarts.baidu.com/index.html" target="_blank" rel="external">官方文档</a></p>
<p>ECharts，缩写来自Enterprise Charts，商业级数据图表，一个纯Javascript的图表库，可以流畅的运行在PC和移动设备上，兼容当前绝大部分浏览器（IE6/7/8/9/10/11，chrome，firefox，Safari等），底层依赖轻量级的Canvas类库ZRender，提供直观，生动，可交互，可高度个性化定制的数据可视化图表。创新的拖拽重计算、数据视图、值域漫游等特性大大增强了用户体验，赋予了用户对数据进行挖掘、整合的能力。</p>
<p>支持折线图（区域图）、柱状图（条状图）、散点图（气泡图）、K线图、饼图（环形图）、雷达图（填充雷达图）、和弦图、力导向布局图、地图、仪表盘、漏斗图、事件河流图等12类图表，同时提供标题，详情气泡、图例、值域、数据区域、时间轴、工具箱等7个可交互组件，支持多图表、组件的联动和混搭展现。</p>
<p>以我们的项目为例，可以很方便的使用Echarts进行数据可视化。<br><code>templates/sample/echarts.html</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% extends &#34;base.html&#34; %&#125;&#10;&#123;% block title%&#125;ECharts&#123;% endblock %&#125;&#10;&#123;% block content %&#125;&#10;&#60;!-- &#20026;ECharts&#20934;&#22791;&#19968;&#20010;&#20855;&#22791;&#22823;&#23567;&#65288;&#23485;&#39640;&#65289;&#30340;Dom --&#62;&#10;&#60;div id=&#34;main&#34; style=&#34;height:400px&#34;&#62;&#60;/div&#62;&#10;&#60;!-- ECharts&#25991;&#20214;&#24341;&#20837; --&#62;&#10;&#60;script src=&#34;http://echarts.baidu.com/build/dist/echarts-all.js&#34;&#62;&#60;/script&#62;&#10;&#60;script type=&#34;text/javascript&#34;&#62;&#10;// &#22522;&#20110;&#20934;&#22791;&#22909;&#30340;dom&#65292;&#21021;&#22987;&#21270;echarts&#22270;&#34920;&#10;var myChart = echarts.init(document.getElementById(&#39;main&#39;));&#10;&#10;var option = &#123;&#10;    tooltip: &#123;&#10;        show: true&#10;    &#125;,&#10;    legend: &#123;&#10;        data:[&#39;&#38144;&#37327;&#39;]&#10;    &#125;,&#10;    xAxis : [&#10;        &#123;&#10;            type : &#39;category&#39;,&#10;            data : [&#34;&#34924;&#34923;&#34;,&#34;&#32650;&#27611;&#34923;&#34;,&#34;&#38634;&#32442;&#34923;&#34;,&#34;&#35044;&#23376;&#34;,&#34;&#39640;&#36319;&#38795;&#34;,&#34;&#34972;&#23376;&#34;]&#10;        &#125;&#10;    ],&#10;    yAxis : [&#10;        &#123;&#10;            type : &#39;value&#39;&#10;        &#125;&#10;    ],&#10;    series : [&#10;        &#123;&#10;            &#34;name&#34;:&#34;&#38144;&#37327;&#34;,&#10;            &#34;type&#34;:&#34;bar&#34;,&#10;            &#34;data&#34;:&#123;&#123; data &#125;&#125;&#10;        &#125;&#10;    ]&#10;&#125;;&#10;&#10;// &#20026;echarts&#23545;&#35937;&#21152;&#36733;&#25968;&#25454;&#10;myChart.setOption(option);&#10;&#60;/script&#62;&#10;&#123;% endblock %&#125;</span><br></pre></td></tr></table></figure></p>
<p>效果如下：<br><img src="http://7xnepc.com1.z0.glb.clouddn.com/echarts-1.png" alt="柱状图"></p>
<hr>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"> &#60;!-- &#20026;ECharts&#20934;&#22791;&#19968;&#20010;&#20855;&#22791;&#22823;&#23567;&#65288;&#23485;&#39640;&#65289;&#30340;Dom --&#62;&#10;&#60;div id=&#34;main1&#34; style=&#34;height:400px; width: 80%; margin-left: 10%;&#34;&#62;&#60;/div&#62;&#10;&#60;!-- ECharts&#25991;&#20214;&#24341;&#20837; --&#62;&#10;&#60;script src=&#34;http://echarts.baidu.com/build/dist/echarts-all.js&#34;&#62;&#60;/script&#62;&#10;&#60;script type=&#34;text/javascript&#34;&#62;&#10;// &#22522;&#20110;&#20934;&#22791;&#22909;&#30340;dom&#65292;&#21021;&#22987;&#21270;echarts&#22270;&#34920;&#10;option1 = &#123;&#10;    title : &#123;&#10;        text: &#39;&#26576;&#31449;&#28857;&#29992;&#25143;&#35775;&#38382;&#26469;&#28304;&#39;,&#10;        subtext: &#39;&#32431;&#23646;&#34394;&#26500;&#39;,&#10;        x:&#39;center&#39;&#10;    &#125;,&#10;    tooltip : &#123;&#10;        trigger: &#39;item&#39;,&#10;        formatter: &#34;&#123;a&#125; &#60;br/&#62;&#123;b&#125; : &#123;c&#125; (&#123;d&#125;%)&#34;&#10;    &#125;,&#10;    legend: &#123;&#10;        orient : &#39;vertical&#39;,&#10;         x : &#39;left&#39;,&#10;         data:[&#39;&#30452;&#25509;&#35775;&#38382;&#39;,&#39;&#37038;&#20214;&#33829;&#38144;&#39;,&#39;&#32852;&#30431;&#24191;&#21578;&#39;,&#39;&#35270;&#39057;&#24191;&#21578;&#39;,&#39;&#25628;&#32034;&#24341;&#25806;&#39;]&#10;    &#125;,&#10;    toolbox: &#123;&#10;        show : true,&#10;        feature : &#123;&#10;            mark : &#123;show: true&#125;,&#10;            dataView : &#123;show: true, readOnly: false&#125;,&#10;            magicType : &#123;&#10;                show: true,&#10;                type: [&#39;pie&#39;, &#39;funnel&#39;],&#10;                option: &#123;&#10;                    funnel: &#123;&#10;                        x: &#39;25%&#39;,&#10;                        width: &#39;50%&#39;,&#10;                        funnelAlign: &#39;left&#39;,&#10;                        max: 1548&#10;                    &#125;&#10;                &#125;&#10;            &#125;,&#10;            restore : &#123;show: true&#125;,&#10;            saveAsImage : &#123;show: true&#125;&#10;        &#125;&#10;    &#125;,&#10;    calculable : true,&#10;    series : [&#10;        &#123;&#10;            name:&#39;&#35775;&#38382;&#26469;&#28304;&#39;,&#10;            type:&#39;pie&#39;,&#10;            radius : &#39;55%&#39;,&#10;            center: [&#39;50%&#39;, &#39;60%&#39;],&#10;            data:[&#10;                &#123;value:335, name:&#39;&#30452;&#25509;&#35775;&#38382;&#39;&#125;,&#10;                &#123;value:310, name:&#39;&#37038;&#20214;&#33829;&#38144;&#39;&#125;,&#10;                &#123;value:234, name:&#39;&#32852;&#30431;&#24191;&#21578;&#39;&#125;,&#10;                &#123;value:135, name:&#39;&#35270;&#39057;&#24191;&#21578;&#39;&#125;,&#10;                &#123;value:1548, name:&#39;&#25628;&#32034;&#24341;&#25806;&#39;&#125;&#10;            ]&#10;        &#125;&#10;    ]&#10;&#125;;&#10;&#10;// &#20026;echarts&#23545;&#35937;&#21152;&#36733;&#25968;&#25454;&#10;var myChart = echarts.init(document.getElementById(&#39;main1&#39;));&#10;myChart.setOption(option1);&#10;&#60;/script&#62;</span><br></pre></td></tr></table></figure>
 <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
<p><div id="main1" style="height:400px; width: 80%; margin-left: 10%;"></div><br><!-- ECharts单文件引入 --></p>
<script src="http://echarts.baidu.com/build/dist/echarts-all.js"></script>
<script type="text/javascript">
// 基于准备好的dom，初始化echarts图表
option1 = {
    title : {
        text: '某站点用户访问来源',
        subtext: '纯属虚构',
        x:'center'
    },
    tooltip : {
        trigger: 'item',
        formatter: "{a} <br/>{b} : {c} ({d}%)"
    },
    legend: {
        orient : 'vertical',
         x : 'left',
         data:['直接访问','邮件营销','联盟广告','视频广告','搜索引擎']
    },
    toolbox: {
        show : true,
        feature : {
            mark : {show: true},
            dataView : {show: true, readOnly: false},
            magicType : {
                show: true,
                type: ['pie', 'funnel'],
                option: {
                    funnel: {
                        x: '25%',
                        width: '50%',
                        funnelAlign: 'left',
                        max: 1548
                    }
                }
            },
            restore : {show: true},
            saveAsImage : {show: true}
        }
    },
    calculable : true,
    series : [
        {
            name:'访问来源',
            type:'pie',
            radius : '55%',
            center: ['50%', '60%'],
            data:[
                {value:335, name:'直接访问'},
                {value:310, name:'邮件营销'},
                {value:234, name:'联盟广告'},
                {value:135, name:'视频广告'},
                {value:1548, name:'搜索引擎'}
            ]
        }
    ]
};

// 为echarts对象加载数据
var myChart = echarts.init(document.getElementById('main1'));
myChart.setOption(option1);
</script>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://zozoz.github.io/2015/08/28/django快速搭建一个网站/" data-id="cil29t10k0008vtjgavbf7k9k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/django/">django</a></li></ul>

    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/BurstDetection/">BurstDetection</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NN/">NN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/django/">django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/运维/">运维</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/BurstDetection/" style="font-size: 10px;">BurstDetection</a> <a href="/tags/NN/" style="font-size: 10px;">NN</a> <a href="/tags/django/" style="font-size: 10px;">django</a> <a href="/tags/运维/" style="font-size: 10px;">运维</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Arkiv</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Siste innlegg</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/02/25/test/">test</a>
          </li>
        
          <li>
            <a href="/2016/02/25/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2015/12/16/Kleinberg/">Kleinberg</a>
          </li>
        
          <li>
            <a href="/2015/10/20/安装配置/">安装配置</a>
          </li>
        
          <li>
            <a href="/2015/09/23/BP算法/">BP算法</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 ZOZOZ<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>